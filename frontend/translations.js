/**
 * MULTILINGUAL TRANSLATIONS
 * Shona | Ndebele | English
 * 
 * Zimbabwe's three main languages for agricultural intelligence
 */

const translations = {
    // SHONA
    sn: {
        // Navigation & Header
        brand_name: "Hupfumi.Africa's Earth Evidence AI",
        tagline: "Pane ivhu rinotaura, data inoteererera, uye uchenjeri hunosarudza",
        welcome: "Mauya!",
        select_district: "ðŸ“ Nzvimbo Yako:",
        choose_district: "Sarudza dunhu rako...",
        
        // Main Sections
        chat_title: "ðŸ’¬ Bvunza Mibvunzo Yako Yekurima",
        crop_budgets: "ðŸŒ¾ Bhajeti Yezvirimwa",
        livestock_budgets: "ðŸ„ Bhajeti Yezvipfuwo",
        tools: "ðŸ§® Maturusi Ekurima",
        
        // Tabs
        budget_calculator: "ðŸ’° Bhajeti Calculator",
        suppliers: "ðŸª Vatengesi Vembeu",
        comparison: "âš–ï¸ Kuenzanisa Zvirimwa",
        species_comparison: "âš–ï¸ Kuenzanisa Mhuka",
        disease_alerts: "ðŸ©º Yambiro Yezvirwere",
        
        // Form Labels
        select_crop: "Sarudza Chirimwa",
        select_livestock: "Sarudza Mhuka",
        select_species: "Sarudza Rudzi rweMhuka",
        farm_size: "Saizi yeNzvimbo (Mahekita)",
        herd_size: "Huwandu hweMhuka (Misoro/Shiri)",
        expected_yield: "Mukohwo Unotarisirwa (t/ha)",
        weight_gain: "Kurema Kunotarisirwa (kg/musoro)",
        
        // Buttons
        calculate: "Verenga Bhajeti Yakazara",
        send: "Tumira",
        speak: "Taura",
        listen: "Teerera",
        hear_results: "ðŸ”Š Inzwa Mhinduro",
        clear: "Bvisa",
        
        // Results
        gross_margin: "Gross Margin",
        total_income: "Mari Yakapinda Yose",
        variable_costs: "Mutengo Unoshanduka",
        net_profit: "Purofiti Yakachena",
        per_hectare: "/ha",
        per_head: "/musoro",
        
        // Cost Categories
        feed: "Chikafu",
        veterinary: "Chiremba Wezvipfuwo",
        housing: "Nzvimbo Yekugara",
        water: "Mvura",
        breeding: "Kuberekesa",
        labour: "Vashandi",
        transport_in: "Kutakura Zvinhu",
        transport_out: "Kutakura Zvibereko",
        sundry: "Zvimwe",
        
        // Intelligence Adjustments
        district_intelligence: "ðŸ§  Kuchinja Kwedunhu",
        adjusted_for: "Yakagadziridzwa",
        confidence: "chivimbo",
        explanation: "Tsanangudzo:",
        
        // Messages
        loading: "Kuverenga...",
        calculating: "Kuverenga bhajeti...",
        error: "Kukanganisa",
        success: "Kwabudirira!",
        
        // Voice
        voice_input: "ðŸŽ¤ Taura mubvunzo wako",
        voice_output: "ðŸ”Š Teerera mhinduro",
        listening: "Ndirikuteerera...",
        speaking: "Ndirikutaura...",
        
        // Coming Soon
        coming_soon: "Zvichauya",
        sadc_expansion: "Kukura kweSADC",
        
        // Greetings
        good_morning: "Mangwanani",
        good_afternoon: "Masikati",
        good_evening: "Manheru"
    },
    
    // NDEBELE
    nd: {
        // Navigation & Header
        brand_name: "Hupfumi.Africa's Earth Evidence AI",
        tagline: "Lapho umhlabathi ukhuluma, idatha ilalele, lenhlakanipho inqume",
        welcome: "Siyakwamukela!",
        select_district: "ðŸ“ Indawo Yakho:",
        choose_district: "Khetha isifunda sakho...",
        
        // Main Sections
        chat_title: "ðŸ’¬ Buza Imibuzo Yakho Yezolimo",
        crop_budgets: "ðŸŒ¾ Ibhajethi Yezitshalo",
        livestock_budgets: "ðŸ„ Ibhajethi Yezifuyo",
        tools: "ðŸ§® Amathuluzi Ezolimo",
        
        // Tabs
        budget_calculator: "ðŸ’° Ibhajethi Calculator",
        suppliers: "ðŸª Abathengisi Benhlanyelo",
        comparison: "âš–ï¸ Ukuqhathanisa Izitshalo",
        species_comparison: "âš–ï¸ Ukuqhathanisa Izilwane",
        disease_alerts: "ðŸ©º Izexwayiso Zezifo",
        
        // Form Labels
        select_crop: "Khetha Isitshalo",
        select_livestock: "Khetha Isilwane",
        select_species: "Khetha Uhlobo Lwezilwane",
        farm_size: "Ubukhulu Bensimu (Amahektare)",
        herd_size: "Ubunengi Bezifuyo (Amakhanda/Izinyoni)",
        expected_yield: "Isivuno Esilindelekayo (t/ha)",
        weight_gain: "Isisindo Esilindelekayo (kg/ikhanda)",
        
        // Buttons
        calculate: "Bala Ibhajethi Epheleleyo",
        send: "Thumela",
        speak: "Khuluma",
        listen: "Lalela",
        hear_results: "ðŸ”Š Zwana Imiphumela",
        clear: "Sula",
        
        // Results
        gross_margin: "Inzuzo Enkulu",
        total_income: "Imali Yonke Engenayo",
        variable_costs: "Izindleko Eziguqukayo",
        net_profit: "Inzuzo Ehlanzekileyo",
        per_hectare: "/ha",
        per_head: "/ikhanda",
        
        // Cost Categories
        feed: "Ukudla",
        veterinary: "Udokotela Wezilwane",
        housing: "Indawo Yokuhlala",
        water: "Amanzi",
        breeding: "Ukuzala",
        labour: "Abasebenzi",
        transport_in: "Ukuthwala Izinto",
        transport_out: "Ukuthwala Isivuno",
        sundry: "Okunye",
        
        // Intelligence Adjustments
        district_intelligence: "ðŸ§  Uhlelo Lwesifunda",
        adjusted_for: "Ilungiswe",
        confidence: "ukuzethemba",
        explanation: "Incazelo:",
        
        // Messages
        loading: "Iyalayisha...",
        calculating: "Ibala ibhajethi...",
        error: "Iphutha",
        success: "Kulungile!",
        
        // Voice
        voice_input: "ðŸŽ¤ Khuluma umbuzo wakho",
        voice_output: "ðŸ”Š Zwana impendulo",
        listening: "Ngiyalalela...",
        speaking: "Ngiyakhuluma...",
        
        // Coming Soon
        coming_soon: "Kuzayo",
        sadc_expansion: "Ukunaba Kwe-SADC",
        
        // Greetings
        good_morning: "Livukile",
        good_afternoon: "Litshonile",
        good_evening: "Lihambile"
    },
    
    // ENGLISH
    en: {
        // Navigation & Header
        brand_name: "Hupfumi.Africa's Earth Evidence AI",
        tagline: "Where the land speaks, data listens, and wisdom decides",
        welcome: "Welcome!",
        select_district: "ðŸ“ Your Location:",
        choose_district: "Select your district...",
        
        // Main Sections
        chat_title: "ðŸ’¬ Ask Your Agricultural Questions",
        crop_budgets: "ðŸŒ¾ Crop Budgets",
        livestock_budgets: "ðŸ„ Livestock Budgets",
        tools: "ðŸ§® Farm Planning Tools",
        
        // Tabs
        budget_calculator: "ðŸ’° Budget Calculator",
        suppliers: "ðŸª Input Suppliers",
        comparison: "âš–ï¸ Crop Comparison",
        species_comparison: "âš–ï¸ Species Comparison",
        disease_alerts: "ðŸ©º Disease & Risk Alerts",
        
        // Form Labels
        select_crop: "Select Crop",
        select_livestock: "Select Livestock",
        select_species: "Select Livestock Species",
        farm_size: "Farm Size (Hectares)",
        herd_size: "Herd/Flock Size (Head/Birds)",
        expected_yield: "Expected Yield (t/ha)",
        weight_gain: "Expected Weight Gain (kg/head)",
        
        // Buttons
        calculate: "Calculate Complete Budget",
        send: "Send",
        speak: "Speak",
        listen: "Listen",
        hear_results: "ðŸ”Š Hear Budget Results",
        clear: "Clear",
        
        // Results
        gross_margin: "Gross Margin",
        total_income: "Total Income",
        variable_costs: "Variable Costs",
        net_profit: "Net Profit",
        per_hectare: "/ha",
        per_head: "/head",
        
        // Cost Categories
        feed: "Feed",
        veterinary: "Veterinary",
        housing: "Housing",
        water: "Water",
        breeding: "Breeding",
        labour: "Labour",
        transport_in: "Transport In",
        transport_out: "Transport Out",
        sundry: "Sundry",
        
        // Intelligence Adjustments
        district_intelligence: "ðŸ§  District Intelligence Adjustments",
        adjusted_for: "Adjusted for",
        confidence: "confidence",
        explanation: "Explanation:",
        
        // Messages
        loading: "Loading...",
        calculating: "Calculating budget...",
        error: "Error",
        success: "Success!",
        
        // Voice
        voice_input: "ðŸŽ¤ Speak your question",
        voice_output: "ðŸ”Š Hear the answer",
        listening: "Listening...",
        speaking: "Speaking...",
        
        // Coming Soon
        coming_soon: "Coming Soon",
        sadc_expansion: "SADC Expansion",
        
        // Greetings
        good_morning: "Good Morning",
        good_afternoon: "Good Afternoon",
        good_evening: "Good Evening"
    }
};

// Language Manager
const LanguageManager = {
    currentLang: 'en',
    
    /**
     * Initialize language system
     */
    init: function() {
        // Load saved language or detect browser language
        const saved = localStorage.getItem('preferred_language');
        if (saved && translations[saved]) {
            this.currentLang = saved;
        } else {
            // Try to detect from browser
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('sn')) this.currentLang = 'sn';
            else if (browserLang.startsWith('nd')) this.currentLang = 'nd';
            else this.currentLang = 'en';
        }
        
        this.applyLanguage(this.currentLang);
    },
    
    /**
     * Change language
     */
    setLanguage: function(lang) {
        if (!translations[lang]) {
            console.error('Language not supported:', lang);
            return;
        }
        
        this.currentLang = lang;
        localStorage.setItem('preferred_language', lang);
        this.applyLanguage(lang);
        
        // Trigger voice language change if available
        if (typeof VoiceIntelligence !== 'undefined') {
            VoiceIntelligence.setLanguage(lang);
        }
    },
    
    /**
     * Apply language to page
     */
    applyLanguage: function(lang) {
        const t = translations[lang];
        
        // Update all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (t[key]) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = t[key];
                } else {
                    element.textContent = t[key];
                }
            }
        });
        
        // Update language selector buttons
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        const activeBtn = document.querySelector(`[data-lang="${lang}"]`);
        if (activeBtn) activeBtn.classList.add('active');
    },
    
    /**
     * Get translation
     */
    t: function(key) {
        return translations[this.currentLang][key] || translations.en[key] || key;
    },
    
    /**
     * Get current language code
     */
    getCurrentLang: function() {
        return this.currentLang;
    }
};

// Voice language mapping for ElevenLabs
const voiceLanguageMap = {
    en: 'en-US',
    sn: 'en-US', // Use English TTS until Shona voice clone available
    nd: 'en-US'  // Use English TTS until Ndebele voice clone available
};

// Export for use in HTML
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, LanguageManager, voiceLanguageMap };
}
